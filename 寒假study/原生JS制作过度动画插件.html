<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
	<style type="text/css">
		#main-div{
			margin: 50px 35%;
		}
		#extracted{
			border: solid 1px blue;
			height: 20px;
			position:relative;
			margin: 1px 0;
		}
		.test-div{
			border: solid 1px red;
			height: 40px;
			margin: 1px 0;
		}
	</style>
</head>
<body>
	<script src="js/lib/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
	<div id="main-div">
		<div class="test-div">
			d
		</div>
		<div id="extracted" data-role="shrink">
			a
		</div>
		<div id="extracted" data-role="shrink">
			b
		</div>
		<div class="test-div">
			d
		</div>
	</div>
	<script type="text/javascript">
		
		function shrink(ele){
			if (typeof ele!=="object"){
				console.log("fun shrink():typeof ele is not element")
			}
			setInterval(function(){
				ele.style.height=parseInt(ele.offsetHeight)-3+'px';		
			},5);	
			setTimeout(function(){
				ele.style.display="none";
			},100);
		}
		function pullAway(ele,direction){
			if (typeof ele!=="object"){
				console.log("fun pullAway():typeof ele is not element")
			}
			var speed;
			if(typeof direction=="string"&& direction=="left"){
				speed=-15;
			}
			if(direction=="right"){
				speed=15;
			}
			s=setInterval(function(){
				ele.style.left=Number(ele.style.left.slice(0,-2))+speed+'px';
				if(Number(a=ele.style.left.slice(0,-2))<-2000||a>2000){
					clearInterval(s);
				}
				console.log(ele.style.left.slice(0,-2)) 
			},5);
		}
		document.querySelectorAll("[data-role=shrink]").forEach(function(value,i){	
			value.addEventListener('click',function(){
				pullAway(this,"right");
				var that=this;
				setTimeout(function(){
					shrink(that);
				},400);
				
			})
		});
	</script>
</body>
</html>